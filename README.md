# DCG API Docs

## Postman Client

The Postman REST client can be used to send requests to the membership and restaurant APIs.

### Configuration

1. Import `postman/collection.json` into the Postman application as a collection.
2. Import `postman/environment.json` into the Postman application as an environment.
3. Select the DCG environment and populate the three variables with the membership API URL, the restaurant API URL and
your consumer token.

### Request Variables

Many endpoints require a variable to be pre-defined before they can be called. These variables will be automatically
created by other endpoints.

For example, `Restaurant API -> V2 -> Brand -> Get Brand` requires `brandId`, but this variable will not exist
initially.

The `Restaurant API -> V2 -> Brand -> List Brands` endpoint will set the `brandId` variable to the ID of the first
brand returned. Calling the `List Brands` endpoint first will ensure that `Get Brand` can request a valid brand.

These dependencies are documented in the description below the endpoint name in Postman. The tables below are provided
as a reference.

The variables and the endpoints that generate them are:

```
Variable        Generated By
----------------------------------------------------------------------------
brandId         Restaurant API -> V2 -> Brand -> List Brands
cardUsageId     Membership API -> Membership Card Usage -> Create Card Usage
chainId         Restaurant API -> V2 -> Chain -> List Chains
cuisineId       Restaurant API -> V2 -> Cuisine -> List Cuisines
customerId      Membership API -> Customer -> Create Customer
customerToken   Membership API -> Customer Token -> Create Token
membershipId    Membership API -> Customer -> Create Customer
offerId         Restaurant API -> V2 -> Restaurant -> List Restaurants
restaurantId    Restaurant API -> V2 -> Restaurant -> List Restaurants
```

The endpoints that require predefined variables are:

```
Endpoint                                                       Required Variables
--------------------------------------------------------------------------------------------------
Restaurant API -> V2 -> Brand -> Get Brand                     brandId
Restaurant API -> V2 -> Chain -> Get Chain                     chainId
Restaurant API -> V2 -> Cuisine -> Get Cuisine                 cuisineId
Restaurant API -> V2 -> Restaurant -> Get Restaurant           restaurantId
Restaurant API -> V2 -> Offer -> Get Offer                     offerId
Membership API -> Customer -> Get Customer                     customerId
Membership API -> Customer -> Update Customer                  customerId
Membership API -> Customer -> Delete Customer                  customerId
Membership API -> Customer Address -> Create Address           customerId
Membership API -> Customer Token -> Create Token               customerId
Membership API -> Customer Token -> Get Token                  customerToken
Membership API -> Membership -> Update Membership              membershipId
Membership API -> Membership -> Cancel Membership              membershipId
Membership API -> Membership Card Usage -> Create Card Usage   membershipId, offerId, restaurantId
Membership API -> Membership Card Usage -> Update Card Usage   cardUsageId, membershipId, offerId
Membership API -> Membership Card Usage -> List Card Usages    membershipId
Membership API -> Membership Card Usage -> Get Card Usage      cardUsageId, membershipId
Membership API -> Membership Card Usage -> Delete Card Usage   cardUsageId, membershipId
```
